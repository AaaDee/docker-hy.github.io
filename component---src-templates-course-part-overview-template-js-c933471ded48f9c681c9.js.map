{"version":3,"file":"component---src-templates-course-part-overview-template-js-c933471ded48f9c681c9.js","mappings":"yVAoBMA,EAAiBC,EAAAA,QAAAA,IAAAA,WAAU,CAAAC,YAAA,6CAAAC,YAAA,gBAAVF,CAAU,gEAS3BG,EAAQH,EAAAA,QAAAA,GAAAA,WAAS,CAAAC,YAAA,oCAAAC,YAAA,gBAATF,CAAS,MAEFI,EAA0B,SAAAC,GAAA,SAAAD,IAAA,OAAAC,EAAAC,MAAA,KAAAC,YAAA,MAAAC,EAAAA,EAAAA,GAAAJ,EAAAC,GAAA,IAAAI,EAAAL,EAAAM,UAuD5C,OAvD4CD,EAGvCE,kBAAiB,eAAAC,GAAAC,EAAAA,EAAAA,GAAAC,IAAAA,MAAvB,SAAAC,IAAA,IAAAC,EAAAC,EAAA,OAAAH,IAAAA,MAAA,SAAAI,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,WACOC,EAAAA,EAAAA,MAAW,CAADH,EAAAE,KAAA,eAAAF,EAAAI,OAAA,wBAAAJ,EAAAE,KAAA,GAIMG,EAAAA,EAAAA,MAAsB,OAAvCN,EAAQC,EAAAM,UAEKC,KADAR,SAAsB,QAAdD,EAARC,EAAUS,oBAAY,IAAAV,OAAd,EAARA,EAAwBW,YAEvCC,EAAAA,EAAAA,UAAS,iBACV,wBAAAV,EAAAW,OAAA,GAAAd,EAAA,KACF,yBAAAH,EAAAN,MAAA,KAAAC,UAAA,EAVsB,GAUtBE,EAEDqB,OAAA,WACE,IAAQC,EAASC,KAAKC,MAAdF,KACRG,EAAiCH,EAAKI,KAA9BC,EAAWF,EAAXE,YAAaC,EAAOH,EAAPG,QACfC,EAAWP,EAAKO,SAASC,MAAMC,KAAI,SAACC,GAAO,IAADC,EAAAC,EACxCC,EAAY,QAATF,EAAGD,EAAEI,YAAI,IAAAH,OAAA,EAANA,EAAQN,YAEpB,OADAQ,EAAIE,UAAkB,QAATH,EAAGF,EAAEI,YAAI,IAAAF,OAAA,EAANA,EAAQI,gBACjBH,CACT,IACMI,GAAWC,EAAAA,EAAAA,KACXC,EAAY,IAAIC,IAAJ,CAAgB,CAChCC,cAAeC,EAAAA,cACfC,WAAYN,IACXO,SAEGC,EAAWzB,EAAKI,KAAKsB,iBAAiBC,UAC1C3B,EAAKI,KAAKsB,iBAAiBE,YAAY,UACvC5B,EAAKI,KAAKsB,iBAAiBG,QAE7B,OACEP,EAAAA,cAACQ,EAAAA,EAAAA,SAAqB,CACpBC,MAAO,CACLC,IAAKzB,EACL0B,QAAS,CAAE5B,YAAaA,EAAaoB,SAAUA,KAGjDH,EAAAA,cAACY,EAAAA,EAAM,CAACC,MAAO9B,EAAY8B,QAC3Bb,EAAAA,cAACc,EAAAA,GAAyB,KACxBd,EAAAA,cAACe,EAAAA,EAAM,KACLf,EAAAA,cAACgB,EAAAA,SAAQ,KACPhB,EAAAA,cAACiB,EAAAA,EAAS,KACRjB,EAAAA,cAACtD,EAAc,KACbsD,EAAAA,cAAClD,EAAK,KAAEiC,EAAY8B,OACnBhB,EAAUb,QAQ3B,EAACjC,CAAA,CAvD4C,CAASiD,EAAAA,WAAnCjD,EACZmE,YAAcC,EAAAA,E","sources":["webpack://ohjelmoinnin-mooc/./src/templates/CoursePartOverviewTemplate.js"],"sourcesContent":["import React, { Fragment } from \"react\"\nimport { graphql } from \"gatsby\"\nimport styled from \"styled-components\"\nimport rehypeReact from \"rehype-react\"\nimport { navigate } from \"gatsby\"\nimport { Helmet } from \"react-helmet\"\n\nimport Layout from \"./Layout\"\n\nimport getNamedPartials from \"../partials\"\nimport { getCachedUserDetails } from \"../services/moocfi\"\nimport \"./remark.css\"\nimport PagesContext from \"../contexes/PagesContext\"\nimport LoginStateContext, {\n  LoginStateContextProvider,\n} from \"../contexes/LoginStateContext\"\nimport Container from \"../components/Container\"\n\nimport { loggedIn } from \"../services/moocfi\"\n\nconst ContentWrapper = styled.div`\n  margin-top: 1rem;\n  padding-bottom: 2rem;\n\n  p {\n    margin-bottom: 2rem;\n  }\n`\n\nconst Title = styled.h1``\n\nexport default class CoursePartOverviewTemplate extends React.Component {\n  static contextType = LoginStateContext\n\n  async componentDidMount() {\n    if (!loggedIn()) {\n      return\n    }\n\n    let userInfo = await getCachedUserDetails()\n    const research = userInfo?.extra_fields?.research\n    if (research === undefined) {\n      navigate(\"/missing-info\")\n    }\n  }\n\n  render() {\n    const { data } = this.props\n    const { frontmatter, htmlAst } = data.page\n    const allPages = data.allPages.edges.map((o) => {\n      const res = o.node?.frontmatter\n      res.exercises = o.node?.moocfiExercises\n      return res\n    })\n    const partials = getNamedPartials()\n    const renderAst = new rehypeReact({\n      createElement: React.createElement,\n      components: partials,\n    }).Compiler\n\n    const filePath = data.page.fileAbsolutePath.substring(\n      data.page.fileAbsolutePath.lastIndexOf(\"/data/\"),\n      data.page.fileAbsolutePath.length,\n    )\n    return (\n      <PagesContext.Provider\n        value={{\n          all: allPages,\n          current: { frontmatter: frontmatter, filePath: filePath },\n        }}\n      >\n        <Helmet title={frontmatter.title} />\n        <LoginStateContextProvider>\n          <Layout>\n            <Fragment>\n              <Container>\n                <ContentWrapper>\n                  <Title>{frontmatter.title}</Title>\n                  {renderAst(htmlAst)}\n                </ContentWrapper>\n              </Container>\n            </Fragment>\n          </Layout>\n        </LoginStateContextProvider>\n      </PagesContext.Provider>\n    )\n  }\n}\n\nexport const pageQuery = graphql`\n  query ($path: String!) {\n    page: markdownRemark(frontmatter: { path: { eq: $path } }) {\n      htmlAst\n      html\n      frontmatter {\n        path\n        title\n      }\n      fileAbsolutePath\n    }\n    allPages: allMarkdownRemark {\n      edges {\n        node {\n          id\n          frontmatter {\n            path\n            title\n          }\n          moocfiExercises {\n            id\n            type\n            parentPagePath\n          }\n        }\n      }\n    }\n  }\n`\n"],"names":["ContentWrapper","styled","displayName","componentId","Title","CoursePartOverviewTemplate","_React$Component","apply","arguments","_inheritsLoose","_proto","prototype","componentDidMount","_componentDidMount","_asyncToGenerator","_regeneratorRuntime","_callee","_userInfo$extra_field","userInfo","_context","prev","next","loggedIn","abrupt","getCachedUserDetails","sent","undefined","extra_fields","research","navigate","stop","render","data","this","props","_data$page","page","frontmatter","htmlAst","allPages","edges","map","o","_o$node","_o$node2","res","node","exercises","moocfiExercises","partials","getNamedPartials","renderAst","rehypeReact","createElement","React","components","Compiler","filePath","fileAbsolutePath","substring","lastIndexOf","length","PagesContext","value","all","current","Helmet","title","LoginStateContextProvider","Layout","Fragment","Container","contextType","LoginStateContext"],"sourceRoot":""}